
<html>
<head>
    <meta charset="utf-8">
    <title>New QoE</title>
    
<link rel="stylesheet" href="https://ssl.mail.163.com/mimg.127.net/xm/all/qa/css/iframe.css">
    <link rel="stylesheet" href="reset.css" type="text/css">
    <link rel="stylesheet" href="styl.css" type="text/css">
        
	
	<script type="text/javascript" src="jquery.min.js"></script>

<script src="echartjs/esl.js"></script>

		

<script>
selectResult = "";
scopeTop="";
scopeEnd="";
switchTop="";
switchEnd="";
switchBefore="";
switchAfter="";
rateScope="";
</script>

<script>

  $(document).ready(function(){
        require.config({
            paths:{ 
                'echarts' : './echartjs/echarts',
                'echarts/chart/line' : './echartjs/echarts-map'
            }
        });
        
        // 使用
        require(
            [
                'echarts',
                'echarts/chart/line' // 使用柱状图就加载bar模块，按需加载
            ],
            function(ec) {
                // 基于准备好的dom，初始化echarts图表
                 myChart2 = ec.init(document.getElementById('afterRemain')); 
                 myChart3 = ec.init(document.getElementById('afterSwitch')); 
                
               })


  });

</script>
	


</head>

<body >
    
    <!-- *********  Header  ********** -->
    
     <div id="header">
        <div id="header_in">
        
           <h1><a href="main.php"><b>New </b> QoE</a></h1>
        
         <div id="menu">
         <ul>
            <li><a href="main.php" >Home</a></li>
            <li><a href="context.php" >Context</a></li>
            <li><a href="load.php">Load</a></li>            
            <li><a href="user.php">User</a></li>            
            <li><a href="switch.php" >Switch</a></li>
            <li><a href="bitRateType.php" class="active">BitRate</a></li>
         </ul>
        </div>
        
        </div>
    </div>
    
    <!-- *********  Main part – headline ********** -->
    
        
        <div id="main_part_inner">
            <div id="main_part_inner_in">
        
            <h2>bitRateType</h2>
            
            
            
            </div>
            
        </div>
        
        
        <!-- *********  Content  ********** -->
        <div style="width:16%;float:left;margin:10px 5px 15px 20px">


	</div>

<div style="width:960px;margin:auto;">
<div id="filter" class="filter">
        <dl>
            <dt>device:</dt>
            <dd><div><a>all</a></div></dd>
            <dd><div><a>iPad</a></div></dd>
            <dd><div><a>Android Pad 7</a></div></dd>
            <dd><div><a>Android Phone</a></div></dd>
            <dd><div><a>iPhone</a></div></dd>
            <dd><div><a>Ctv</a></div></dd>
            <dd><div><a>Ott Stb</a></div></dd>
            <dd style="margin-left:150px"><div><a>PC</a></div></dd>
            <dd><div><a>Tbd</a></div></dd>
            <dd><div><a>TV Cloud</a></div></dd>
            <dd><div><a>other</a></div></dd>
        </dl>
       
        <dl>
            <dt>video types:</dt>
            <dd><div><a>all</a></div></dd>
            <dd><div><a>movie</a></div></dd>
            <dd><div><a>children</a></div></dd>
            <dd><div><a>documentary</a></div></dd>
            <dd><div><a>fun</a></div></dd>
            <dd><div><a>music</a></div></dd>
            <dd><div><a>news</a></div></dd>
            <dd><div><a>series</a></div></dd>
            <dd style="margin-left:150px"><div><a>sports</a></div></dd>
            <dd><div><a>others</a></div></dd>
          </dl>
        <dl>
          <dt>switch type:</dt>
          <dd><div><a>all</a></div></dd>
          <dd><div><a>up</a></div></dd>
          <dd><div><a>down</a></div></dd>
          <dd><div><a>up-up</a></div></dd>
          <dd><div><a>up-down</a></div></dd>
          <dd><div><a>down-up</a></div></dd>
          <dd><div><a>down-down</a></div></dd>
        </dl>
       
        <dl>
          <dt>next switch type:</dt>
          <dd><div><a>all</a></div></dd>
          <dd><div><a>up</a></div></dd>
          <dd><div><a>down</a></div></dd>
          <dd><div><a>end</a></div></dd>
        </dl>
      <dl>

        <dt>playPercent:</dt>
          <dd><div><input style="width:100px" value="0" id="scopeTop"type="text"> -</div></dd>
          <dd><div><input style="width:100px" value="100" id="scopeEnd"type="text"></div></dd>(between 0~100%)
        </dl>
      <dl>

        <dt>switchPercent:</dt>
          <dd><div><input style="width:100px" value="0" id="switchTop"type="text"> -</div></dd>
          <dd><div><input style="width:100px" value="100" id="switchEnd"type="text"></div></dd>(between 0~100%)
        </dl>
      <dl>

        <dt>beforeRate:</dt>
          <dd><div><input style="width:100px"  id="switchBefore"type="text"> </div></dd>
          <dt>afterRate:</dt>
          <dd><div><input style="width:100px"  id="switchAfter"type="text"></div></dd>
        </dl>
      <dl>

        <dt>rateScope:</dt>
          <dd><div><input style="width:100px"  id="rateScope"type="text"> </div></dd>
        </dl>
      </div>

      </br>
      </br>

      
	




<div style=" text-align:center;">
    <input id ="selectResult" name="selectResult"  style="display:none"></input>


    <input type="submit" class="button_snapshot" onclick="getOK()"  value ="submit"/>
    </br>
    <div>
      <input type="submit" class="button_snapshot" onclick="snapshot()" value="snapshot"></input>
      </div>
    <div>此页面加载时间较长，请耐心等待...
      </div>
</div>

	
		
		

      
   

       <div id="afterSwitch" style="height: 500px; min-width: 310px"></div>
       <div id="afterRemain" style="height: 500px; min-width: 310px"></div>



    


    











</div>




	
	
   <!-- *********  Footer  ********** -->
    
    <hr class="cleanit">
    
     <div id="footer">
        <div id="footer_in">
            
            <p><a href="www.tsinghua.edu.cn">Tsinghua University</a> Department of Computer Science and Technology</p>
            <span>Author: <a href="http://media.cs.tsinghua.edu.cn/~wangzhi/">Wang Zhi</a> - Zhou Chao </span>

        
        </div>
      </div>



         

</body>














<script type="text/javascript">
    $(function () {
        //选中filter下的所有a标签，为其添加hover方法，该方法有两个参数，分别是鼠标移上和移开所执行的函数。
        $("#filter a").hover(
            function () {
                $(this).addClass("seling");
            },
            function () {
                $(this).removeClass("seling");
            }
        );


        //选中filter下所有的dt标签，并且为dt标签后面的第一个dd标签下的a标签添加样式seled。(感叹jquery的强大)
        $("#filter dt+dd a").attr("class", "seled"); /*注意：这儿应该是设置(attr)样式，而不是添加样式(addClass)，
                                                    不然后面通过$("#filter a[class='seled']")访问不到class样式为seled的a标签。*/       
        //为filter下的所有a标签添加单击事件
        $("#filter a").click(function () {
            $(this).parents("dl").children("dd").each(function () {
        //下面三种方式效果相同（第三种写法的内部就是调用了find()函数，所以，第二、三种方法是等价的。）
                //$(this).children("div").children("a").removeClass("seled");
        //$(this).find("a").removeClass("seled");
        $('a',this).removeClass("seled");
            });

            $(this).attr("class", "seled");

            RetSelecteds(); //返回选中结果   弹出
        });
      //  alert(RetSelecteds()); //返回选中结果   弹出
    });

    function RetSelecteds() {

      result =""; 
        $("#filter a[class='seled']").each(function () {
            result += $(this).html()+",";
        });
        selectResult = result;
    }
</script>

		
		<script src="hsjs/highstock.js"></script>
<script src="hsjs/modules/exporting.js"></script>
<script src="hcjs/highcharts.js"></script>
<script src="hcjs/modules/exporting.js"></script>


<script>
  function snapshot(){

    window.open("static/template/bitRateTypeSnapshot.htm");
  }

</script>

<script>
  function getOK(){

    if(selectResult=="")
      selectResult="all,all,all,all";


    switchBefore=$("#switchBefore").val();
    switchAfter=$("#switchAfter").val();
    rateScope=$("#rateScope").val();


    switchTop=parseInt($("#switchTop").val());
    switchEnd=parseInt($("#switchEnd").val());

    if(switchTop<0 || switchTop>100 ||switchTop<0 ||switchEnd>100 ||switchTop>switchEnd){
      alert("input is not allowed");
      return ;
    }
    scopeTop=parseInt($("#scopeTop").val());
    scopeEnd=parseInt($("#scopeEnd").val());

    if(scopeTop<0 || scopeTop>100 ||scopeTop<0 ||scopeEnd>100 ||scopeTop>scopeEnd){
      alert("input is not allowed");
      return ;
    }
    //alert(serverResult);
//    window.open("switchSnapshot.php");

    if(switchBefore=="")
    switchBefore="all";
    if(switchAfter=="")
    switchAfter="all";
    if(rateScope=="")
    rateScope="all";
    myChart2.clear();
    myChart3.clear();
    myChart2.showLoading();
    myChart3.showLoading();
    //drawCdf-----------

    afterRemain="";


    
      $.ajax({
            type : "post",
            url : "service/bitRateType/afterRemainCdf.php?callback=?",
            data:{
              selectResult:selectResult,
              scopeTop:scopeTop,
              scopeEnd:scopeEnd,
              switchTop:switchTop,
              switchEnd:switchEnd,
              switchBefore:switchBefore,
              switchAfter:switchAfter,
              rateScope:rateScope

            },
            dataType : "jsonp",
            jsonp: "callback",//传递给请求处理程序或页面的，用以获得jsonp回调函数名的参数名(默认为:callback)
            success : function(data){

        //alert(data);
      afterRemain=data;


                      option = {
    title : {
        text: 'afterRemainCdf',
        subtext: 'BesTV'
    },
    tooltip : {
        trigger: 'axis'
    },
    toolbox: {
        show : true,
        feature : {
            mark : {show: true},
            dataView : {show: true, readOnly: false},
            magicType : {show: true, type: ['line', 'bar', 'stack', 'tiled']},
            restore : {show: true},
            saveAsImage : {show: true}
        }
    },
    calculable : true,
    xAxis : [
        {
            type : 'category',
            boundaryGap : false,
            data : ['0%','10%','20%','30%','40%','50%','60%','70%','80%','90%','100%']
        }
    ],
    yAxis : [
        {
            type : 'value',
            axisLabel : {
                show:true,
                interval: 'auto',    // {number}
                formatter: '{value} %',    // Template formatter!
            }
        }
    ],
    series : [
        {
            name:'成交',
            type:'line',
            smooth:true,
            itemStyle: {normal: {areaStyle: {type: 'default'}}},
            data:afterRemain
        }
    ]
};
                    


                
                myChart2.hideLoading();
                myChart2.setOption(option); 


            }
          });


    afterCdf="";


      $.ajax({
            type : "post",
            url : "service/bitRateType/afterSwitchCdf.php?callback=?",
            data:{
              selectResult:selectResult,
              scopeTop:scopeTop,
              scopeEnd:scopeEnd,
              switchTop:switchTop,
              switchEnd:switchEnd,
              switchBefore:switchBefore,
              switchAfter:switchAfter,
              rateScope:rateScope

            },
            dataType : "jsonp",
            jsonp: "callback",//传递给请求处理程序或页面的，用以获得jsonp回调函数名的参数名(默认为:callback)
            success : function(data){

        //alert(data);
      afterCdf=data;

        

                      option = {
    title : {
        text: 'afterSwitchCdf',
        subtext: 'BesTV'
    },
    tooltip : {
        trigger: 'axis'
    },
    toolbox: {
        show : true,
        feature : {
            mark : {show: true},
            dataView : {show: true, readOnly: false},
            magicType : {show: true, type: ['line', 'bar', 'stack', 'tiled']},
            restore : {show: true},
            saveAsImage : {show: true}
        }
    },
    calculable : true,
    xAxis : [
        {
            type : 'category',
            boundaryGap : false,
            data : ['0%','10%','20%','30%','40%','50%','60%','70%','80%','90%','100%']
        }
    ],
    yAxis : [
        {
            type : 'value',
            axisLabel : {
                show:true,
                interval: 'auto',    // {number}
                formatter: '{value} %',    // Template formatter!
            }
        }
    ],
    series : [
        {
            name:'成交',
            type:'line',
            smooth:true,
            itemStyle: {normal: {areaStyle: {type: 'default'}}},
            data:afterCdf
        }
    ]
};
                    


                
                myChart3.hideLoading()
                myChart3.setOption(option); 


            }
          });





    //-----------------








}

</script>
</html>
