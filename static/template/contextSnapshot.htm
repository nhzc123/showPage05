

<html>
<head>
    <meta charset="utf-8">
    <title>New QoE</title>
    
<link rel="stylesheet" href="https://ssl.mail.163.com/mimg.127.net/xm/all/qa/css/iframe.css">
    <link rel="stylesheet" href="../../reset.css" type="text/css">
    <link rel="stylesheet" href="../../styl.css" type="text/css">
        
	
	<script type="text/javascript" src="../../jquery.min.js"></script>

<script src="../../echartjs/esl.js"></script>







    <script type="text/javascript">
    
    
      $(document).ready(function(){
       


//typeOfVideo------------
typeOfVideoData= window.opener.typeOfVideoData;
videoType=[];
for(i=0;i<typeOfVideoData.videoType.length;i++)
videoType[i]=typeOfVideoData.videoType[i];
videoNum=[];
for(i=0;i<typeOfVideoData.videoNum.length;i++)
videoNum[i]=typeOfVideoData.videoNum[i];
        require.config({
            paths:{ 
                'echarts' : '../../echartjs/echarts',
                'echarts/chart/bar' : '../../echartjs/echarts-map'
            }
        });
        
        // 使用
        require(
            [
                'echarts',
                'echarts/chart/bar' // 使用柱状图就加载bar模块，按需加载
            ],
            function(ec) {
                // 基于准备好的dom，初始化echarts图表
                var myChart = ec.init(document.getElementById('typeOfVideo')); 
                     
          
option = {
    title : {
        text: 'typeOfVideo',
        subtext: 'BesTV'
    },
    tooltip : {
        trigger: 'axis'
    },
    legend: {
        data:['typeOfVideo']
    },
    toolbox: {
        show : true,
        feature : {
            mark : {show: true},
            dataView : {show: true, readOnly: false},
            magicType: {show: true, type: ['line', 'bar']},
            restore : {show: true},
            saveAsImage : {show: true}
        }
    },
    calculable : true,
    xAxis : [
        {
            type : 'value',
            boundaryGap : [0, 0.01]
        }
    ],
    yAxis : [
        {
            type : 'category',
            data :videoType
        }
    ],
    series : [
        {
            name:'typeOfVideo',
            type:'bar',
            data:videoNum
        },
       
    ]
};
                    







                // 为echarts对象加载数据 
                myChart.setOption(option); 
            }
        );




//----------------------

//dashTransTime------------
dashTransTimeData=window.opener.dashTransTimeData;
switchTime=[];
for(i=0;i<dashTransTimeData.switchTime.length;i++)
switchTime[i]=dashTransTimeData.switchTime[i];
switchNum=[];
for(i=0;i<dashTransTimeData.switchNum.length;i++)
switchNum[i]=dashTransTimeData.switchNum[i];
        require.config({
            paths:{ 
                'echarts' : '../../echartjs/echarts',
                'echarts/chart/bar' : '../../echartjs/echarts-map'
            }
        });
        
        // 使用
        require(
            [
                'echarts',
                'echarts/chart/bar' // 使用柱状图就加载bar模块，按需加载
            ],
            function(ec) {
                // 基于准备好的dom，初始化echarts图表
                var myChart = ec.init(document.getElementById('dashTransTime')); 
                     
          
option = {
    title : {
        text: 'dashTransTime',
        subtext: 'BesTV'
    },
    tooltip : {
        trigger: 'axis'
    },
    legend: {
        data:['dashTransTime']
    },
    color:[ '#87cefa'],
    toolbox: {
        show : true,
        feature : {
            mark : {show: true},
            dataView : {show: true, readOnly: false},
            magicType: {show: true, type: ['line', 'bar']},
            restore : {show: true},
            saveAsImage : {show: true}
        }
    },
    calculable : true,
    xAxis : [
        {
            type : 'value',
            boundaryGap : [0, 0.01]
        }
    ],
    yAxis : [
        {
            type : 'category',
            data :switchTime
        }
    ],
    series : [
        {
            name:'dashTransTime',
            type:'bar',
            data:switchNum
        },
       
    ]
};
                    







                // 为echarts对象加载数据 
                myChart.setOption(option); 
            }
        );








//----------------------



//bitRate------------
bitRateData="";

      $.ajax({
            type : "post",
            url : "../../service/context/bitRate.php?callback=?",
            data:{

              type:2,
            },
            dataType : "jsonp",
            jsonp: "callback",//传递给请求处理程序或页面的，用以获得jsonp回调函数名的参数名(默认为:callback)
            success : function(data){

              bitRateData=data;
        require.config({
            paths:{ 
                'echarts' : '../../echartjs/echarts',
                'echarts/chart/bar' : '../../echartjs/echarts-map'
            }
        });
        
        // 使用
        require(
            [
                'echarts',
                'echarts/chart/bar' // 使用柱状图就加载bar模块，按需加载
            ],
            function(ec) {
                // 基于准备好的dom，初始化echarts图表
                var myChart = ec.init(document.getElementById('bitRate')); 
                     
          
option = {
    title : {
        text: 'bitRate',
        subtext: 'BesTV',
        x:'center'
    },
    tooltip : {
        trigger: 'item',
        formatter: "{a} <br/>{b} : {c} ({d}%)"
    },
    legend: {
        orient : 'vertical',
        x : 'left',
        data:['s1','s2','s3','s4','s5','s6','s7']
    },
    toolbox: {
        show : true,
        feature : {
            mark : {show: true},
            dataView : {show: true, readOnly: false},
            restore : {show: true},
            saveAsImage : {show: true}
        }
    },
    calculable : true,
    series : [
        {
            name:'访问来源',
            type:'pie',
            radius : '55%',
            center: ['50%', 225],
                data:bitRateData.bitRateArray
        }
    ]
};
                     







                // 为echarts对象加载数据 
                myChart.setOption(option); 
            }
        );








            }
          });
//----------------------


//device------------
deviceData="";

      $.ajax({
            type : "post",
            url : "../../service/context/device.php?callback=?",
            data:{

              type:2,
            },
            dataType : "jsonp",
            jsonp: "callback",//传递给请求处理程序或页面的，用以获得jsonp回调函数名的参数名(默认为:callback)
            success : function(data){

              deviceData=data;
        require.config({
            paths:{ 
                'echarts' : '../../echartjs/echarts',
                'echarts/chart/bar' : '../../echartjs/echarts-map'
            }
        });
        
        // 使用
        require(
            [
                'echarts',
                'echarts/chart/bar' // 使用柱状图就加载bar模块，按需加载
            ],
            function(ec) {
                // 基于准备好的dom，初始化echarts图表
                var myChart = ec.init(document.getElementById('device')); 
                     
          
option = {
    title : {
        text: 'device',
        subtext: 'BesTV',
        x:'center'
    },
    tooltip : {
        trigger: 'item',
        formatter: "{a} <br/>{b} : {c} ({d}%)"
    },
    legend: {
        orient : 'vertical',
        x : 'left',
        data:deviceData.name
    },
    toolbox: {
        show : true,
        feature : {
            mark : {show: true},
            dataView : {show: true, readOnly: false},
            restore : {show: true},
            saveAsImage : {show: true}
        }
    },
    calculable : true,
    series : [
        {
            name:'访问来源',
            type:'pie',
            radius : '55%',
            center: ['50%', 225],
            data:deviceData.deviceValue
        }
    ]
};
                     







                // 为echarts对象加载数据 
                myChart.setOption(option); 
            }
        );








            }
          });
//----------------------



//userISP------------
userISPData="";

      $.ajax({
            type : "post",
            url : "../../service/context/userISP.php?callback=?",
            data:{

              type:2,
            },
            dataType : "jsonp",
            jsonp: "callback",//传递给请求处理程序或页面的，用以获得jsonp回调函数名的参数名(默认为:callback)
            success : function(data){

              userISPData=data;
        require.config({
            paths:{ 
                'echarts' : '../../echartjs/echarts',
                'echarts/chart/bar' : '../../echartjs/echarts-map'
            }
        });
        
        // 使用
        require(
            [
                'echarts',
                'echarts/chart/bar' // 使用柱状图就加载bar模块，按需加载
            ],
            function(ec) {
                // 基于准备好的dom，初始化echarts图表
                var myChart = ec.init(document.getElementById('userISP')); 
                     
          
option = {

    title : {
        text: 'userISP',
        subtext: 'BesTV',
        x:'center'
    },
    tooltip : {
        trigger: 'item',
        formatter: "{a} <br/>{b} : {c} ({d}%)"
    },
    legend: {
        orient : 'vertical',
        x : 'left',
        data:userISPData.name
    },
    toolbox: {
        show : true,
        feature : {
            mark : {show: true},
            dataView : {show: true, readOnly: false},
            restore : {show: true},
            saveAsImage : {show: true}
        }
    },
    calculable : true,
    series : [
        {
            name:'访问来源',
            type:'pie',
            radius : ['50%', '70%'],
            itemStyle : {
                normal : {
                    label : {
                        show : false
                    },
                    labelLine : {
                        show : false
                    }
                },
                emphasis : {
                    label : {
                        show : true,
                        position : 'center',
                        textStyle : {
                            fontSize : '30',
                            fontWeight : 'bold'
                        }
                    }
                }
            },
            data:userISPData.value
        }
    ]
};
                    





                // 为echarts对象加载数据 
                myChart.setOption(option); 
            }
        );








            }
          });
//----------------------




//serverISP------------
serverISPData="";

      $.ajax({
            type : "post",
            url : "../../service/context/serverISP.php?callback=?",
            data:{

              type:2,
            },
            dataType : "jsonp",
            jsonp: "callback",//传递给请求处理程序或页面的，用以获得jsonp回调函数名的参数名(默认为:callback)
            success : function(data){

              serverISPData=data;
        require.config({
            paths:{ 
                'echarts' : '../../echartjs/echarts',
                'echarts/chart/bar' : '../../echartjs/echarts-map'
            }
        });
        
        // 使用
        require(
            [
                'echarts',
                'echarts/chart/bar' // 使用柱状图就加载bar模块，按需加载
            ],
            function(ec) {
                // 基于准备好的dom，初始化echarts图表
                var myChart = ec.init(document.getElementById('serverISP')); 
                     
          
option = {

    title : {
        text: 'serverISP',
        subtext: 'BesTV',
        x:'center'
    },
    tooltip : {
        trigger: 'item',
        formatter: "{a} <br/>{b} : {c} ({d}%)"
    },
    legend: {
        orient : 'vertical',
        x : 'left',
        data:serverISPData.name
    },
    toolbox: {
        show : true,
        feature : {
            mark : {show: true},
            dataView : {show: true, readOnly: false},
            restore : {show: true},
            saveAsImage : {show: true}
        }
    },
    calculable : true,
    series : [
        {
            name:'访问来源',
            type:'pie',
            radius : ['50%', '70%'],
            itemStyle : {
                normal : {
                    label : {
                        show : false
                    },
                    labelLine : {
                        show : false
                    }
                },
                emphasis : {
                    label : {
                        show : true,
                        position : 'center',
                        textStyle : {
                            fontSize : '30',
                            fontWeight : 'bold'
                        }
                    }
                }
            },
            data:serverISPData.value
        }
    ]
};
                    





                // 为echarts对象加载数据 
                myChart.setOption(option); 
            }
        );








            }
          });
//----------------------



//----------------------






//engagement----------
   seriesOptions = window.opener.seriesOptions;






    $('#engagement').highcharts('StockChart', {
        chart: {
        },

        rangeSelector: {
        inputEnabled: $('#engagement').width() > 480,
            selected: 4
        },

        title:{
          text:'engagement',
      },

        yAxis: {
          labels: {
            formatter: function() {
              return this.value ;
            }
          },
          plotLines: [{
            value: 0,
            width: 2,
            color: 'silver'
          }]
        },
        
        
        tooltip: {
          pointFormat: '<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b> <br/>',
          valueDecimals: 2
        },
        
        series: seriesOptions

    });



//-----------------------






      });
    
    
    </script>


</head>

<body >
    
        
        

<div style="width:960px;margin:auto;">

	
		
		
       <div id="engagement" style="height: 500px; min-width: 310px"></div>

      
   
   <div style="width:450px;float:left">
		<div id="typeOfVideo" style="min-width: 110px; height: 400px; margin: 0 auto"></div>
		</div>
	
		<div style="width:450px;float:left">
		<div id="dashTransTime" style="min-width: 110px; height: 400px; margin: 0 auto"></div>
		</div>
		
<div style="width:450px;float:left">
		<div id="bitRate" style="min-width: 110px; height: 400px; margin: 0 auto"></div>
		</div>
	
		<div style="width:450px;float:left">
		<div id="device" style="min-width: 110px; height: 400px; margin: 0 auto"></div>
		</div>



<div style="width:450px;float:left">
		<div id="userISP" style="min-width: 110px; height: 400px; margin: 0 auto"></div>
		</div>
	
		<div style="width:450px;float:left">
		<div id="serverISP" style="min-width: 110px; height: 400px; margin: 0 auto"></div>
		</div>
    










    
  </div>


    











</div>
         

</body>





		
		<script src="../../hsjs/highstock.js"></script>
<script src="../../hsjs/modules/exporting.js"></script>
<script src="../../hcjs/highcharts.js"></script>
<script src="../../hcjs/modules/exporting.js"></script>



</html>
